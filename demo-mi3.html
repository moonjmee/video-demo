<!DOCTYPE html>
<html lang="en">

<head>
    <title>Video Player</title>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <link href="https://vjs.zencdn.net/7.10.2/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.10.2/video.min.js"></script>

    <link href="https://unpkg.com/@silvermine/videojs-quality-selector/dist/css/quality-selector.css" rel="stylesheet">
    <script src="https://unpkg.com/@silvermine/videojs-quality-selector/dist/js/silvermine-videojs-quality-selector.min.js"></script>

    <style>
        .video-container {
            display: flex;
        }

        .video-js {
            flex: 1;
            margin-right: 10px;
        }
    </style>
</head>

<body>
<h1>Mission Impossible 3</h1>
<h2>Left: Elemental H.264, Right: Cloud H.264 </h2>

<div class="video-container">
    <video id="video1" class="video-js vjs-default-skin" controls autoplay muted>
    </video>

    <video id="video2" class="video-js vjs-default-skin" controls autoplay muted>
    </video>
</div>

<script>
    $(document).ready(function() {
        let options = {
            sources: [
                {src: "/video/play", type: "video/mp4"}
            ],
            playbackRates: [.75, 1, 1.5, 2],
            poster: "[이미지 주소 등록]",
            controls: true,
            preload: "auto",
            width: 1920,
            height: 540,
            controlBar: {
                playToggle: true,
                pictureInPictureToggle: false,
                remainingTimeDisplay: true,
                progressControl: true,
                qualitySelector: true,
            }
        };

        var player1 = videojs('video1', options);
        player1.src([
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-elemental/MissionImpossible3_MO-FHD-H264.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114556Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=3020e1fd134a558e07ded08024775b87eadd96951fa63a3f138ad4b9f9194744",
                type: 'video/mp4',
                label: 'FHD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-elemental/MissionImpossible3_MO-HD-H264.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114629Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=b37ba8073e740c3bffe040d6e137d8241eb4e289debcbafb864f5de5de407d71",
                type: 'video/mp4',
                label: 'HD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-elemental/MissionImpossible3_MO-SD-H264.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114658Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=f7907ee548a11ef29f13b100869d7c7239318f043cc2bf5e033c90aeaae44669",
                type: 'video/mp4',
                label: 'SD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-elemental/MissionImpossible3_MO-LD-H264.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114718Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=0c654dd7bb5b0cabccc8bc6e05ff5757d88dc62198c235722e40752998c6ff87",
                type: 'video/mp4',
                label: 'LD',
                selected: true,
            },
        ]);

        var player2 = videojs('video2', options);
        player2.src([
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-cloud-sharpness-1.0/MissionImpossible3_MO-FHD-H264-MP4_MO-MC-1TK-AAC-2CH_CE10006.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114903Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=e8efc7ce8333834504ca67552c354782d95c21c35149f795099f7ffc1c1673a1",
                type: 'video/mp4',
                label: 'FHD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-cloud-sharpness-1.0/MissionImpossible3_MO-HD-H264-MP4_MO-MC-1TK-AAC-2CH_CE10006.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114923Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=5f62c6107b26871ea5818061ef4d2128df02e6a93caf74ba5499bfab33f97124",
                type: 'video/mp4',
                label: 'HD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-cloud-sharpness-1.0/MissionImpossible3_MO-SD-H264-MP4_MO-MC-1TK-AAC-2CH_CE10006.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114940Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=c3cef8d00114130820137f17652767d035aa00f3105f2a789ceb61db6768db41",
                type: 'video/mp4',
                label: 'SD',
                selected: true,
            },
            {
                src: "https://cmps-dev-input.s3.amazonaws.com/quality-test/output-cloud-sharpness-1.0/MissionImpossible3_MO-LD-H264-MP4_MO-MC-1TK-AAC-2CH_CE10006.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAQQEDXSSYW6PC6DFK%2F20230903%2Fap-northeast-2%2Fs3%2Faws4_request&X-Amz-Date=20230903T114959Z&X-Amz-Expires=7200&X-Amz-SignedHeaders=host&X-Amz-Signature=d1d027345551810008fb7eff94ea2c9440a9cb87981073c4dce3621d47d06e55",
                type: 'video/mp4',
                label: 'LD',
                selected: true,
            },
        ]);
        player2.on('loadeddata', function() {
            $('.vjs-loading-spinner').hide();
        });
    })

    var video1 = document.getElementById('video1');
    var video2 = document.getElementById('video2');

    video1.addEventListener('loadedmetadata', function() {
        synchronizeVideos();
    });

    video1.addEventListener('timeupdate', function() {
        synchronizeVideos();
    });

    video2.addEventListener('timeupdate', function() {
        synchronizeVideos();
    });

    function synchronizeVideos() {
        var currentTime = video1.currentTime;
        if (video2.currentTime !== currentTime) {
            video2.currentTime = currentTime;
        }
    }
</script>


</body>
</html>